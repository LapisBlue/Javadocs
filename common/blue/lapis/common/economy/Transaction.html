<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.6.0_32) on Sat Sep 27 07:18:42 UTC 2014 -->
<title>Transaction</title>
<meta name="date" content="2014-09-27">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Transaction";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../blue/lapis/common/economy/EconomyAccount.html" title="interface in blue.lapis.common.economy"><span class="strong">PREV CLASS</span></a></li>
<li>NEXT CLASS</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?blue/lapis/common/economy/Transaction.html" target="_top">FRAMES</a></li>
<li><a href="Transaction.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<p class="subTitle">blue.lapis.common.economy</p>
<h2 title="Class Transaction" class="title">Class Transaction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>blue.lapis.common.economy.Transaction</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <strong>Transaction</strong>
extends java.lang.Object</pre>
<div class="block"><p>A Transaction represents a single atomic state-change request to an <a href="../../../../blue/lapis/common/economy/EconomyAccount.html" title="interface in blue.lapis.common.economy"><code>EconomyAccount</code></a>.</p>

 <p>The primary data elements exposed are a <code>delta</code> and an <code>absolute</code>. Delta represents
 addition or subtraction to the account, and absolute represents a directly-set balance. If both delta and
 absolute are present, absolute is applied first, then delta. Any conforming EconomyAccount is required to
 honor these two elements as specified.</p>

 <p>Secondary information of arbitrary kinds can be attached to initiator, target, and reason.
 Initiator and target are most often players, but can be automated systems, villager NPCs,
 or anything that clearly identifies that endpoint of the transaction. Reason is <b>typically</b> a String,
 but can wind up holding many auxiliary details of a transaction. It is recommended but not required for a
 conforming EconomyAccount to ignore these three elements.</p>

 <p>Additionally, Transactions are aware of their <code>Status</code>. As they are being built, and once they are
 fully built, they are INCOMPLETE. After calling <a href="../../../../blue/lapis/common/economy/Transaction.html#commit()"><code>commit()</code></a> they will be in one of three states:</p>
 <ul>
     <li>CANCELLED: If a listener has cancelled the related TransactionEvent before it could be applied</li>
     <li>FAILED:    If an EconomyAccount has rejected this Transaction and is unchanged</li>
     <li>COMPLETE:  If the Transaction has successfully committed and its proposed changes are reflected in
     the EconomyAccount</li>
 </ul>

 <p>This class has a fluent building and calling syntax. Typically a transaction might look like:</p>

 <pre>
     Transaction t = Transaction.on(myFriendsAccount)
         .withInitiator(me)
         .withTarget(myFriend)
         .withReason("My friend is awesome!!!!11111!111")
         .add(9001)
         .commit();
     if (t.getStatus())!= Transaction.Status.COMPLETE) System.out.println(":(");
 </pre></div>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="on(blue.lapis.common.economy.EconomyAccount)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>on</h4>
<div class="block"><p>Begin building a new Transaction</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>account</code> - The EconomyAccount which this Transaction applies to</dd>
<dt><span class="strong">Returns:</span></dt><dd>A new Transaction which will operate on the specified account</dd></dl>
</li>
</ul>
<a name="withInitiator(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withInitiator</h4>
<div class="block"><p>Add an initiator to this Transaction</p>

 <p>This method may not be called after the Transaction has left INCOMPLETE Status.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>initiator</code> - Any object identifying the origin of this Transaction.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="withTarget(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withTarget</h4>
<div class="block"><p>Add a target to this Transaction</p>

 <p>This method may not be called after the Transaction has left INCOMPLETE Status.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>target</code> - Any object identifying this Transaction's target; usually the account holder.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="withReason(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withReason</h4>
<div class="block"><p>Add a reason to this Transaction.</p>

 <p>This method may not be called after the Transaction has left INCOMPLETE Status.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reason</code> - An identifying characteristic of this Transaction. Often this is a String representing what
               was purchased, but can be arbitrary data for event listeners to use.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="withAbsolute(java.lang.Double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withAbsolute</h4>
<div class="block"><p>Add a new balance amount to this Transaction. This is generally not recommended except in
 circumstances where an administrator has explicitly set someone's balance.</p>

 <p>This method may not be called after the Transaction has left INCOMPLETE Status.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>balance</code> - The new "absolute" balance for this account</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../blue/lapis/common/economy/Transaction.html#add(double)"><code>add(double)</code></a>, 
<a href="../../../../blue/lapis/common/economy/Transaction.html#subtract(double)"><code>subtract(double)</code></a></dd></dl>
</li>
</ul>
<a name="getAccount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAccount</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>The EconomyAccount which this Transaction applies to</dd></dl>
</li>
</ul>
<a name="getReason()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReason</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>The Reason object which identifies an item being bought/sold, land being taxed, or similar data</dd></dl>
</li>
</ul>
<a name="getInitiator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitiator</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>The initiator, usually the Player who invoked this transaction</dd></dl>
</li>
</ul>
<a name="getTarget()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTarget</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>The target of the "action" being performed, usually the holder of the EconomyAccount involved</dd></dl>
</li>
</ul>
<a name="getDelta()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDelta</h4>
<pre>public&nbsp;double&nbsp;getDelta()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>The amount the balance should change</dd></dl>
</li>
</ul>
<a name="getAbsolute()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAbsolute</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>The new balance which this Transaction specifies for the account, or null if this transaction is
         a relative gain/loss</dd></dl>
</li>
</ul>
<a name="getStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatus</h4>
<dl><dt><span class="strong">Returns:</span></dt><dd>How far along we are in this Transaction, whether it has succeeded, or in what way it failed.</dd></dl>
</li>
</ul>
<a name="add(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<div class="block">Express a payment or increase in the account's balance.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>amount</code> - The amount to increase the account balance by</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="subtract(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subtract</h4>
<div class="block">Express a withdrawal or loss to the account's balance.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>amount</code> - The amount to reduce the account balance by</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="setAbsolute(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAbsolute</h4>
<div class="block">Express a constant balance that the account should be changed to</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>amount</code> - The amount that the new account balance should be</dd>
<dt><span class="strong">Returns:</span></dt><dd>This object for further modification</dd></dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>commit</h4>
<div class="block">Causes a TransactionEvent to be fired for this Transaction, and if the event is not cancelled, hands this
 Transaction to the EconomyAccount for final processing. If everything goes well there, the status is
 updated to COMPLETE.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The status of this Transaction; either CANCELLED, FAILED, or COMPLETE.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../blue/lapis/common/economy/EconomyAccount.html" title="interface in blue.lapis.common.economy"><span class="strong">PREV CLASS</span></a></li>
<li>NEXT CLASS</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?blue/lapis/common/economy/Transaction.html" target="_top">FRAMES</a></li>
<li><a href="Transaction.html" target="_top">NO FRAMES</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>SUMMARY:&nbsp;</li>
<li>NESTED&nbsp;|&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_summary">METHOD</a></li>
</ul>
<ul class="subNavList">
<li>DETAIL:&nbsp;</li>
<li>FIELD&nbsp;|&nbsp;</li>
<li>CONSTR&nbsp;|&nbsp;</li>
<li><a href="#method_detail">METHOD</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
